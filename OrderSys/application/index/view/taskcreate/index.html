{include file="public/header" /}
<div id="page-wrapper">
    <div class="container-fluid">
        <!-- 页面头部 -->
        <div class="row">
            <div class="col-lg-12">
                <h1 class="page-header">
                    任务创建 <small>创建订单</small>
                </h1>
                <ol class="breadcrumb">
                    <li class="active">
                        <i class="fa fa-dashboard"></i> 任务创建
                    </li>
                </ol>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-6 col-lg-offset-3">
                <form action="{:url('choicetask')}" method="post" id="taskcreate-form">
                    <div class="form-group">
                        <label for="userid">用户编号</label>
                        <input type="text" class="form-control" id="userid" name="userid" value="" placeholder="请输入用户编号">
                    </div>
                    <div class="form-group">
                        <label for="wechatid">微信号</label>
                        <input type="text" class="form-control" id="wechatid" name="wechatid" value="" placeholder="请输入微信号">
                    </div>
                    <div class="form-group">
                        <label for="qqid">QQ</label>
                        <input type="text" class="form-control" id="qqid" name="qqid" value="" placeholder="请输入QQ号码">
                    </div>
                    <button type="submit" class="btn btn-default pull-right">确定</button>
                </form>
                <div class="modal fade" id="modalTask" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title">提示</h4>
                            </div>
                            <div class="modal-body">
                                <p>用户编号、微信号、QQ必须填写一项</p>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-primary" data-dismiss="modal">确定</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
$(function() {
    /*$("#taskcreate-form").submit(function() {
        if ($("#userid").val() == "" && $("#qqid").val() == "" && $("#wechatid").val() == "") {
            $("#modalTask").modal();
            return false;
        }
    })*/
    $('#taskcreate-form')
        .bootstrapValidator({
            feedbackIcons: {
                valid: 'glyphicon glyphicon-ok',
                invalid: 'glyphicon glyphicon-remove',
                validating: 'glyphicon glyphicon-refresh'
            },
            fields: {
                'qqid': {
                    validators: {
                        regexp: {
                            regexp: /^[0-9]+$/,
                            message: '请填写正确的QQ'
                        }
                    }
                },
                'wechatid': {
                    validators: {
                        regexp: {
                            regexp: /^[a-zA-Z0-9_]+$/,
                            message: '请填写正确的微信号'
                        }
                    }
                },
                'userid': {
                    validators: {
                        regexp: {
                            regexp: /^[0-9]+$/,
                            message: '请填写正确的用户编号'
                        }
                    }
                }
            }
        }).on('success.form.bv', function(e) {
            if ($("#userid").val() == "" && $("#qqid").val() == "" && $("#wechatid").val() == "") {
                e.preventDefault();
                $("#modalTask").modal();
            }
        })
})
</script>
{include file="public/footer" /}
